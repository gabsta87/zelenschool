<ion-content> 
<div class="scheduleContainer">

    <ion-grid class="ion-no-margin">
        <ion-row class="ion-text-center">
            <ion-col>
                <ion-buttons class="ion-justify-content-center">
                <ion-button
                    fill="solid"
                    class="btn btn-primary"
                    mwlCalendarPreviousView
                    [view]="view"
                    [(viewDate)]="viewDate"
                    (viewDateChange)="closeOpenMonthViewDay()"
                >
                    Previous
                </ion-button>
                <ion-button
                    fill="solid"
                    class="btn btn-outline-secondary"
                    mwlCalendarToday
                    [(viewDate)]="viewDate"
                >
                    Today
                </ion-button>
                <ion-button
                    fill="solid"
                    class="btn btn-primary"
                    mwlCalendarNextView
                    [view]="view"
                    [(viewDate)]="viewDate"
                    (viewDateChange)="closeOpenMonthViewDay()"
                >
                    Next
                </ion-button>
                </ion-buttons>
            </ion-col>
            <ion-col>
                <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>
            </ion-col>
            <ion-col>
                <ion-buttons class="ion-justify-content-center">
                    <ion-button fill="solid" (click)="setView(CalendarView.Month)" [class.active]="view === CalendarView.Month">Month</ion-button>
                    <ion-button fill="solid" (click)="setView(CalendarView.Week)" [class.active]="view === CalendarView.Week">Week</ion-button>
                    <ion-button fill="solid" (click)="setView(CalendarView.Day)" [class.active]="view === CalendarView.Day">Day</ion-button>
                </ion-buttons>
            </ion-col>
        </ion-row>
    </ion-grid>

<!-- Start Calendar -->
<!-- (dayClicked)="myclick($event)" -->


<div [ngSwitch]="view">
    <mwl-calendar-month-view
        *ngSwitchCase="CalendarView.Month"
        [viewDate]="viewDate"
        [events]="events"
        [refresh]="refresh"
        [activeDayIsOpen]="activeDayIsOpen"
        (eventClicked)="handleCalendarEntry('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)"
        (dayClicked)="dayClicked($event.day)"
    >
    </mwl-calendar-month-view>
    <mwl-calendar-week-view
        *ngSwitchCase="CalendarView.Week"
        [viewDate]="viewDate"
        [events]="events"
        [refresh]="refresh"
        (eventClicked)="handleCalendarEntry('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)"
    >
    </mwl-calendar-week-view>
    <mwl-calendar-day-view
        *ngSwitchCase="CalendarView.Day"
        [viewDate]="viewDate"
        [events]="events"
        [refresh]="refresh"
        (eventClicked)="handleCalendarEntry('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)"
    >
    </mwl-calendar-day-view>
</div>

<!-- Event commands -->


<ion-grid class="ion-no-margin">
    <ion-row class="ion-text-center">
        <ion-col>
            <h3>
                Edit events
            </h3>
        </ion-col>
        <ion-col>
            <ion-text>{{clickedDate|json}}</ion-text>
        </ion-col>
        <ion-col *ngIf="(isTeacher|async) || (isAdmin|async)">
            <ion-buttons class="ion-justify-content-center">
                <ion-button id="open-modal" fill="solid" (click)="creatingEvent($event)">Add new</ion-button>
            </ion-buttons>
        </ion-col>
    </ion-row>
</ion-grid>

<div class="events_grid" *ngIf="extractedData as eventsList">
<ion-grid>
    <ion-row>
        <ion-col>
            Title
        </ion-col>
        <ion-col>
            Time
        </ion-col>
        <ion-col>
            Teacher	
        </ion-col>
        <ion-col>
            Classroom	
        </ion-col>
        <ion-col>
            Attendants
        </ion-col>
    </ion-row>
    <ion-row *ngFor="let event of eventsList; index as i">
        <ion-col>
            {{event['title']}}
        </ion-col>
        <ion-col>
            {{event['eventDate']| date: "HH:mm d MMM, yy"}}
        </ion-col>
        <ion-col>
            {{event['author'].f_name}} {{event['author'].l_name}}
        </ion-col>
        <ion-col>            
            {{event['room_id']}}
        </ion-col>
        <ion-col>
            <ion-list *ngIf="event['attendantsId']" lines="none" class="ion-no-padding">
                <ion-item class="ion-no-padding">
                    <ion-text style="display: flex; align-items: center;">
                        ({{event['attendantsId'].length}}/{{event['max_participants']}})
                    </ion-text>
                </ion-item>
                <ion-item *ngFor="let att of event['attendantsId']" class="ion-no-padding">
                    {{att.f_name}} {{att.l_name}}
                </ion-item>
            </ion-list>
        </ion-col>
    </ion-row>
</ion-grid>
</div>
</div>
</ion-content>

